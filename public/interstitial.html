<html>
  <head>
    <title>Tips & Tricks</title>
    <meta charset="UTF-8">
    <!-- <script src="https://cdn.jsdelivr.net/npm/p5@1.9.4/lib/p5.js"></script> -->
    <link rel="stylesheet" href="styles.css"></style>
    <script>
        const queryString = window.location.search;
        console.log(queryString);
        const urlParams = new URLSearchParams(queryString);
        let cameraId = urlParams.get('cameraId')
        let cameraUrl = urlParams.get('cameraUrl')
        //I shuld really just add /api to the actual objects but ugh
        cameraUrl = cameraUrl.indexOf("nyctmc") > -1 ? cameraUrl : `/api${cameraUrl}`
        let animeCon = false
        animeCon = cameraId === "aacbd8a1-56b6-4757-b0b0-1bea396469c6" ? true : false
        console.log(cameraId, cameraUrl)
    </script>
    <style>

        img {
            width: 100%;
            max-height: 40vh;
        }
        #errorDiv {
            display: none;
            text-align: left;
            padding: 5vw
        }

        .interstitialMain {
            margin-top: 5vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 5%;
        }

        button {
            min-width: 70vw;
            height: 5vh;
            background-color: #efefef;
            padding : 20px;
            font-size: 3rem;
            padding: 20px;
            border-radius: 20px;
        }
    </style>
  </head>
  <body>
    <div class="main">
        <h1 id="mainHeaderText">How to take a good traffic camera picture:</h1>
        <div style="text-align: left;">
            <div style="margin-top: 20px;">
                <b>1. Make sure you're in frame</b>
                <p>Can you see yourself? If not, <a href="#" onclick="refreshImage()">refresh</a> until you can!</p>
                <img id="image" src="">
            </div>
            <div>
                <br/>
                <b>2. Don't get run over</b>
                <p>Stop traffic with your looks, not your body</p><br/>
            </div>
            <div>
                <b>3. Bolder is better</b>
                <p>To stand out, wear bright colors, bring large groups, etc</p>
                <br/>
            </div>
            <div>
                <b>4. Know how the cameras work</b>
                <p>Most cameras only take new photos every two seconds, so hold your pose :)</p>
                <br/>
            </div>
            <div>
                <b>5. Agree to abide by local traffic laws <span style="color: red">*</span></b></br>
                <input type="checkbox" id="disclaimerBox" name="disclaimerBox" value="Bike">
                <label for="vehicle1">I agree not to use Traffic Cam Photobooth for any unlawful purpose. I will comply with all local laws while using Traffic Cam Photobooth, and I will not use Traffic Cam Photobooth in a manner that creates a foreseeable risk of harm or danger to myself. I have read and agree to these terms.</label><br>
                <br/>
            </div>
            <div style="text-align: center; font-size: xx-large;">
                <a class="finalLink" href="#">
                    <button id="button" onclick="getUserLocation()">ðŸ“¸ > Take My Photo! > ðŸ“¸</button>
                  </a>
                  
                <!-- <b><a class="finalLink" id="finalLink" href="">>>>>>>>>>>>>>>>>>>>>>>>>>></a></b><br/>
                <b><a class="finalLink" id="finalLink" href="">ðŸ“¸ > Take My Photo > ðŸ“¸</a></b><br/>
                <b><a class="finalLink" id="finalLink" href="">>>>>>>>>>>>>>>>>>>>>>>>>>></a></b> -->
            </div>
            <br/>
        </div>
    </div>
    <script>
        var checkbox = document.querySelector("input[name=disclaimerBox]");

        checkbox.addEventListener('change', function() {
        if (this.checked) {
            console.log("Checkbox is checked..");
            let allLinks = document.getElementsByClassName('finalLink')
            console.log(allLinks)
            for (let link of allLinks) {
                if (animeCon) {
                    link.setAttribute('href', `./animephotobooth.html?cameraId=${cameraId}&cameraUrl=${cameraUrl}`)
                } else {
                    link.setAttribute('href', `./photobooth.html?cameraId=${cameraId}&cameraUrl=${cameraUrl}`)
                }
            }
            document.getElementById('button').innerHTML = "ðŸ“¸ > Take My Photo! > ðŸ“¸"
        } else {
            console.log("Checkbox is not checked..");
        }
        });

        const getUserLocation = () => {
            document.getElementById('button').innerHTML = "Check the box!"
        }

        const refreshImage = () => {
            document.getElementById('image').setAttribute('src', `${cameraUrl}?cacheAvoidance=${Math.floor(Math.random() * 100000)}`)
        }
        refreshImage()



        // .forEach(el => el.setAttribute('href', `./photobooth.html?cameraId=${cameraId}`))
    </script>
  </body>
</html>